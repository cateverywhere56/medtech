---
/**
 * Liste des actualités (Markdown) via import.meta.glob.
 * Titre + image pointent vers la source.
 * Affiche le logo (favicon) et le nom de la source. Fond #D9D9D9.
 */
const modules = import.meta.glob('../content/papers/*.md', { eager: true });

const posts = Object.values(modules)
  .map((m: any) => m.frontmatter)
  .filter((fm: any) => fm && fm.title && fm.sourceUrl)
  .sort((a: any, b: any) => new Date(b.date).getTime() - new Date(a.date).getTime());

const hostOf = (url: string) => {
  try { return new URL(url).hostname.replace(/^www\./, ''); } catch { return ''; }
};
const brandMap: Record<string, string> = {
  'francetvinfo.fr': 'Franceinfo',
  'franceinfo.fr': 'Franceinfo',
  'france24.com': 'France 24',
  'rfi.fr': 'RFI',
  '20minutes.fr': '20 Minutes',
  'ouest-france.fr': 'Ouest-France',
  'lemonde.fr': 'Le Monde',
};
const brandOf = (url: string) => {
  const h = hostOf(url);
  return brandMap[h] || h || 'Source';
};
const faviconOf = (url: string) => {
  const h = hostOf(url);
  return h ? `https://www.google.com/s2/favicons?domain=${h}&sz=64` : '';
};
---
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Actualités — France</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body style="background:#D9D9D9; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; min-height:100vh;">
    <div style="max-width: 1080px; margin: 0 auto; padding: 24px;">
      <header>
        <h1 style="
